<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <!--    
    RoyCalderon ^_^  
    usar la clase de Java ResourcesBean para Controlar esta Vista
    -->
    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.AppName}"></h:outputText>
        </ui:define>


        <ui:define name="body">

            <p:fieldset legend="Cargar un Recurso!" toggleable="true" toggleSpeed="500" style="text-align: center;" collapsed="false">
                <h:form>  
                    <h:panelGrid columns="3" cellpadding="4" style="text-align: center"  >  

                        <h:outputLabel for="tittle" value="Nombre Del Recurso: *"  />  
                        <p:inputText id="tittle" required="true" value="#{resourcesBean.e_Recurso.nombre}"/>  
                        <p:tooltip for="tittle" showEvent="focus" value="Ingrese el nombre del recurso ;)" hideEvent="blur" />   

                        <h:outputLabel for="description" value="Descripcion Del Recurso: *"  />  
                        <p:inputTextarea id="description" required="true" rows="2" cols="15" autoResize="true" value="#{resourcesBean.e_Recurso.descripcion}"/>  
                        <p:tooltip for="description" showEvent="focus" value="Ingrese La Descripcion del recurso ;)" hideEvent="blur" />   


                        <h:outputText value="Asignatura: * " />  

                        <h:selectOneMenu id="select1materia" value="#{resourcesBean.asignaturaSeleccionada}" var="v_Asignatura">
                            <f:selectItem itemLabel="Seleccione 1 Materia ;)" itemValue=""></f:selectItem>
                            <f:selectItems value="#{resourcesBean.select1Item()}" var="v_Asig" itemLabel="#{v_Asig.nombre}" itemValue="#{v_Asig}"></f:selectItems>
                        </h:selectOneMenu>  
                        <p:tooltip for="select1materia" showEvent="focus" value="Selecciona la asignatura en donde cargaras el recurso!" hideEvent="blur" />  


                        <h:outputText value="Archivo: * " />  
                        <h:form enctype="multipart/form-data">  
                            <p:fileUpload fileUploadListener="#{resourcesBean.handleFileUpload}" showButtons="true" 
                                          invalidSizeMessage="Se ha producido un error: El tamaño del archivo sobrepasa el maximo permitido!"
                                          invalidFileMessage="Se ha producido un error: El tipo de archivo no es permitido!"
                                          requiredMessage="Se ha producido un error: Debe seleccionar un archivo!"
                                          label="Seleccionar" cancelLabel="CANCELAR" uploadLabel="CARGAR" 
                                          dragDropSupport="true" 
                                          mode="advanced"
                                          update="messages"  
                                          sizeLimit="100000"   
                                          allowTypes="/(\.|\/)(gif|jpe?g|png|jpg|pdf|doc|docx)$/"/> 

                            <p:growl id="messages" showDetail="true"/></h:form>
                    </h:panelGrid>  

                </h:form>
            </p:fieldset> 

            <p:fieldset legend="Ver Recursos Disponibles!" toggleSpeed="1000" toggleable="true" style="
                        text-align: center" collapsed="false" >

                <p:treeTable value="#{resourcesBean.treeRoot}" var="v_node">  
                    <p:column>  
                        <f:facet name="header">  
                            ► Nombre  
                        </f:facet>  
                        <h:outputText value="#{v_node.nombre}" />  
                    </p:column>

                    <p:column>  
                        <f:facet name="header">  
                            ► Tamaño  
                        </f:facet>  
                        <h:outputText value="#{v_node.descripcion}" />  
                    </p:column>

                    <p:column>
                        <f:facet name="header">  
                            ► Tipo
                        </f:facet>  
                        <h:outputText value="#{v_node.tipo}" />  
                    </p:column>

                    <p:column>
                        <f:facet name="header">
                            Valoracion ♥
                        </f:facet>
                        <h:outputText value="#{v_node.valoracion}" />  
                    </p:column>
                </p:treeTable>  


            </p:fieldset>


        </ui:define>

    </ui:composition>

</html>
